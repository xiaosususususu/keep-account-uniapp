{"version":3,"file":"players.js","sources":["pages/players/players.vue","pages/players/players.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<button class=\"add-btn\" type=\"primary\" @click=\"showAddPlayerModal\">添加玩家</button>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"players-list\">\r\n\t\t\t<view v-if=\"players.length === 0\" class=\"empty-tip\">\r\n\t\t\t\t暂无玩家，请添加玩家开始记账\r\n\t\t\t</view>\r\n\t\t\t<view v-else>\r\n\t\t\t\t<view v-for=\"player in players\" :key=\"player.id\" class=\"player-item\">\r\n\t\t\t\t\t<view class=\"player-info\">\r\n\t\t\t\t\t\t<text class=\"player-name\">{{ player.name }}</text>\r\n\t\t\t\t\t\t<text class=\"player-score\">总分：{{ player.totalScore }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"player-actions\">\r\n\t\t\t\t\t\t<button class=\"edit-btn\" size=\"mini\" @click=\"editPlayer(player)\">编辑</button>\r\n\t\t\t\t\t\t<button class=\"delete-btn\" size=\"mini\" type=\"warn\" @click=\"deletePlayer(player.id)\">删除</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view v-if=\"showModal\" class=\"modal-mask\" @click=\"closeModal\">\r\n\t\t\t<view class=\"modal-content\" @click.stop>\r\n\t\t\t\t<view class=\"modal-title\">{{ isEdit ? '编辑玩家' : '添加玩家' }}</view>\r\n\t\t\t\t<input class=\"player-input\" v-model=\"playerName\" placeholder=\"请输入玩家姓名\" />\r\n\t\t\t\t<view class=\"modal-buttons\">\r\n\t\t\t\t\t<button class=\"cancel-btn\" @click=\"closeModal\">取消</button>\r\n\t\t\t\t\t<button class=\"confirm-btn\" type=\"primary\" @click=\"savePlayer\">确定</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { DataManager } from '@/utils/dataManager.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tplayers: [],\r\n\t\t\tshowModal: false,\r\n\t\t\tisEdit: false,\r\n\t\t\tplayerName: '',\r\n\t\t\teditPlayerId: null\r\n\t\t}\r\n\t},\r\n\r\n\tonShow() {\r\n\t\tthis.loadPlayers();\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tloadPlayers() {\r\n\t\t\tthis.players = DataManager.getPlayers();\r\n\t\t},\r\n\r\n\t\tshowAddPlayerModal() {\r\n\t\t\tif (this.players.length >= 8) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '最多添加8位玩家',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.isEdit = false;\r\n\t\t\tthis.playerName = '';\r\n\t\t\tthis.editPlayerId = null;\r\n\t\t\tthis.showModal = true;\r\n\t\t},\r\n\r\n\t\teditPlayer(player) {\r\n\t\t\tthis.isEdit = true;\r\n\t\t\tthis.playerName = player.name;\r\n\t\t\tthis.editPlayerId = player.id;\r\n\t\t\tthis.showModal = true;\r\n\t\t},\r\n\r\n\t\tsavePlayer() {\r\n\t\t\tif (!this.playerName.trim()) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入玩家姓名',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.isEdit) {\r\n\t\t\t\tconst playerIndex = this.players.findIndex(p => p.id === this.editPlayerId);\r\n\t\t\t\tif (playerIndex !== -1) {\r\n\t\t\t\t\tthis.players[playerIndex].name = this.playerName.trim();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst newPlayer = {\r\n\t\t\t\t\tid: Date.now().toString(),\r\n\t\t\t\t\tname: this.playerName.trim(),\r\n\t\t\t\t\ttotalScore: 0\r\n\t\t\t\t};\r\n\t\t\t\tthis.players.push(newPlayer);\r\n\t\t\t}\r\n\r\n\t\t\tDataManager.savePlayers(this.players);\r\n\t\t\tthis.closeModal();\r\n\t\t\tthis.loadPlayers();\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: this.isEdit ? '修改成功' : '添加成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tdeletePlayer(playerId) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '确认删除',\r\n\t\t\t\tcontent: '确定要删除该玩家吗？',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tthis.players = this.players.filter(p => p.id !== playerId);\r\n\t\t\t\t\t\tDataManager.savePlayers(this.players);\r\n\t\t\t\t\t\tthis.loadPlayers();\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tcloseModal() {\r\n\t\t\tthis.showModal = false;\r\n\t\t\tthis.playerName = '';\r\n\t\t\tthis.editPlayerId = null;\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.header {\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.add-btn {\r\n\twidth: 100%;\r\n}\r\n\r\n.players-list {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10rpx;\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.empty-tip {\r\n\ttext-align: center;\r\n\tcolor: #999;\r\n\tpadding: 50rpx 0;\r\n}\r\n\r\n.player-item {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 20rpx 0;\r\n\tborder-bottom: 1rpx solid #eee;\r\n}\r\n\r\n.player-item:last-child {\r\n\tborder-bottom: none;\r\n}\r\n\r\n.player-info {\r\n\tflex: 1;\r\n}\r\n\r\n.player-name {\r\n\tfont-size: 32rpx;\r\n\tcolor: #333;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.player-score {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n.player-actions {\r\n\tdisplay: flex;\r\n\tgap: 20rpx;\r\n}\r\n\r\n.edit-btn, .delete-btn {\r\n\tmin-width: 100rpx;\r\n}\r\n\r\n.modal-mask {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tz-index: 999;\r\n}\r\n\r\n.modal-content {\r\n\tbackground-color: #fff;\r\n\tpadding: 40rpx;\r\n\tborder-radius: 10rpx;\r\n\twidth: 80%;\r\n}\r\n\r\n.modal-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tmargin-bottom: 30rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.player-input {\r\n\tborder: 1rpx solid #ddd;\r\n\tpadding: 20rpx;\r\n\tborder-radius: 5rpx;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.modal-buttons {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tgap: 20rpx;\r\n}\r\n\r\n.cancel-btn, .confirm-btn {\r\n\tflex: 1;\r\n}\r\n</style>","import MiniProgramPage from '/Users/suchengbo/code/AI/kepp-account-uniapp/pages/players/players.vue'\nwx.createPage(MiniProgramPage)"],"names":["DataManager","uni"],"mappings":";;;AAwCA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS,CAAE;AAAA,MACX,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY;AAAA,MACZ,cAAc;AAAA,IACf;AAAA,EACA;AAAA,EAED,SAAS;AACR,SAAK,YAAW;AAAA,EAChB;AAAA,EAED,SAAS;AAAA,IACR,cAAc;AACb,WAAK,UAAUA,8BAAY;IAC3B;AAAA,IAED,qBAAqB;AACpB,UAAI,KAAK,QAAQ,UAAU,GAAG;AAC7BC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AACA,WAAK,SAAS;AACd,WAAK,aAAa;AAClB,WAAK,eAAe;AACpB,WAAK,YAAY;AAAA,IACjB;AAAA,IAED,WAAW,QAAQ;AAClB,WAAK,SAAS;AACd,WAAK,aAAa,OAAO;AACzB,WAAK,eAAe,OAAO;AAC3B,WAAK,YAAY;AAAA,IACjB;AAAA,IAED,aAAa;AACZ,UAAI,CAAC,KAAK,WAAW,QAAQ;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAEA,UAAI,KAAK,QAAQ;AAChB,cAAM,cAAc,KAAK,QAAQ,UAAU,OAAK,EAAE,OAAO,KAAK,YAAY;AAC1E,YAAI,gBAAgB,IAAI;AACvB,eAAK,QAAQ,WAAW,EAAE,OAAO,KAAK,WAAW;QAClD;AAAA,aACM;AACN,cAAM,YAAY;AAAA,UACjB,IAAI,KAAK,IAAK,EAAC,SAAU;AAAA,UACzB,MAAM,KAAK,WAAW,KAAM;AAAA,UAC5B,YAAY;AAAA;AAEb,aAAK,QAAQ,KAAK,SAAS;AAAA,MAC5B;AAEAD,wBAAAA,YAAY,YAAY,KAAK,OAAO;AACpC,WAAK,WAAU;AACf,WAAK,YAAW;AAEhBC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO,KAAK,SAAS,SAAS;AAAA,QAC9B,MAAM;AAAA,MACP,CAAC;AAAA,IACD;AAAA,IAED,aAAa,UAAU;AACtBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,iBAAK,UAAU,KAAK,QAAQ,OAAO,OAAK,EAAE,OAAO,QAAQ;AACzDD,8BAAAA,YAAY,YAAY,KAAK,OAAO;AACpC,iBAAK,YAAW;AAEhBC,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACP,CAAC;AAAA,UACF;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACD;AAAA,IAED,aAAa;AACZ,WAAK,YAAY;AACjB,WAAK,aAAa;AAClB,WAAK,eAAe;AAAA,IACrB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1IA,GAAG,WAAW,eAAe;"}