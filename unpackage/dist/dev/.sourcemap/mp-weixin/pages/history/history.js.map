{"version":3,"file":"history.js","sources":["pages/history/history.vue","pages/history/history.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view v-if=\"gameHistory.length === 0\" class=\"empty-tip\">\r\n\t\t\t<text>暂无游戏记录</text>\r\n\t\t\t<button class=\"go-to-record\" type=\"primary\" @click=\"goToRecord\">开始记账</button>\r\n\t\t</view>\r\n\r\n\t\t<view v-else class=\"history-list\">\r\n\t\t\t<view v-for=\"(game, gameIndex) in gameHistory\" :key=\"game.id\" class=\"game-record\">\r\n\t\t\t\t<view class=\"game-header\">\r\n\t\t\t\t\t<text class=\"game-date\">{{ formatDate(game.date) }}</text>\r\n\t\t\t\t\t<text class=\"game-round\">第 {{ gameHistory.length - gameIndex }} 局</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"players-scores\">\r\n\t\t\t\t\t<view v-for=\"player in game.players\" :key=\"player.id\" class=\"player-score\">\r\n\t\t\t\t\t\t<text class=\"player-name\">{{ player.name }}</text>\r\n\t\t\t\t\t\t<view class=\"scores\">\r\n\t\t\t\t\t\t\t<text class=\"round-score\" :class=\"{ 'positive': player.score > 0, 'negative': player.score < 0 }\">\r\n\t\t\t\t\t\t\t\t{{ player.score > 0 ? '+' : '' }}{{ player.score }}\r\n\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t<text class=\"total-score\">={{ player.totalScore }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view v-if=\"gameHistory.length > 0\" class=\"history-actions\">\r\n\t\t\t<button class=\"clear-history-btn\" type=\"warn\" @click=\"clearHistory\">清空历史记录</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { DataManager, storage, StorageKeys } from '@/utils/dataManager.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tgameHistory: []\r\n\t\t}\r\n\t},\r\n\r\n\tonShow() {\r\n\t\tthis.loadGameHistory();\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tloadGameHistory() {\r\n\t\t\tthis.gameHistory = DataManager.getGameHistory();\r\n\t\t},\r\n\r\n\t\tformatDate(dateString) {\r\n\t\t\tconst date = new Date(dateString);\r\n\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0');\r\n\t\t\tconst day = String(date.getDate()).padStart(2, '0');\r\n\t\t\tconst hours = String(date.getHours()).padStart(2, '0');\r\n\t\t\tconst minutes = String(date.getMinutes()).padStart(2, '0');\r\n\t\t\treturn `${month}-${day} ${hours}:${minutes}`;\r\n\t\t},\r\n\r\n\t\tgoToRecord() {\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: '/pages/record/record'\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tclearHistory() {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '确认清空',\r\n\t\t\t\tcontent: '确定要清空所有历史记录吗？此操作不可恢复！',\r\n\t\t\t\tconfirmText: '确定清空',\r\n\t\t\t\tconfirmColor: '#FF0000',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tstorage.remove(StorageKeys.GAME_HISTORY);\r\n\t\t\t\t\t\tthis.loadGameHistory();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '历史记录已清空',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n\tpadding: 30rpx;\r\n\tmin-height: 100vh;\r\n\tbackground-color: #f5f5f5;\r\n}\r\n\r\n.empty-tip {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tpadding: 100rpx 0;\r\n\tcolor: #999;\r\n}\r\n\r\n.go-to-record {\r\n\tmargin-top: 30rpx;\r\n}\r\n\r\n.history-list {\r\n\r\n}\r\n\r\n.game-record {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 15rpx;\r\n\tpadding: 25rpx;\r\n\tmargin-bottom: 20rpx;\r\n\tbox-shadow: 0 2rpx 8rpx rgba(0,0,0,0.08);\r\n}\r\n\r\n.game-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 20rpx;\r\n\tpadding-bottom: 15rpx;\r\n\tborder-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.game-date {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n.game-round {\r\n\tfont-size: 26rpx;\r\n\tcolor: #999;\r\n\tbackground-color: #f5f5f5;\r\n\tpadding: 5rpx 15rpx;\r\n\tborder-radius: 20rpx;\r\n}\r\n\r\n.players-scores {\r\n\r\n}\r\n\r\n.player-score {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 15rpx 0;\r\n\tborder-bottom: 1rpx solid #f8f8f8;\r\n}\r\n\r\n.player-score:last-child {\r\n\tborder-bottom: none;\r\n}\r\n\r\n.player-name {\r\n\tfont-size: 30rpx;\r\n\tcolor: #333;\r\n}\r\n\r\n.scores {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 15rpx;\r\n}\r\n\r\n.round-score {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.positive {\r\n\tcolor: #52c41a;\r\n}\r\n\r\n.negative {\r\n\tcolor: #ff4d4f;\r\n}\r\n\r\n.total-score {\r\n\tfont-size: 28rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.history-actions {\r\n\tmargin-top: 40rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.clear-history-btn {\r\n\r\n}\r\n</style>","import MiniProgramPage from '/Users/suchengbo/code/AI/kepp-account-uniapp/pages/history/history.vue'\nwx.createPage(MiniProgramPage)"],"names":["DataManager","uni","storage","StorageKeys"],"mappings":";;;AAoCA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,aAAa,CAAC;AAAA,IACf;AAAA,EACA;AAAA,EAED,SAAS;AACR,SAAK,gBAAe;AAAA,EACpB;AAAA,EAED,SAAS;AAAA,IACR,kBAAkB;AACjB,WAAK,cAAcA,8BAAY;IAC/B;AAAA,IAED,WAAW,YAAY;AACtB,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,YAAM,QAAQ,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACrD,YAAM,UAAU,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACzD,aAAO,GAAG,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,OAAO;AAAA,IAC1C;AAAA,IAED,aAAa;AACZC,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA,IAED,eAAe;AACdA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,aAAa;AAAA,QACb,cAAc;AAAA,QACd,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChBC,8BAAAA,QAAQ,OAAOC,8BAAY,YAAY;AACvC,iBAAK,gBAAe;AACpBF,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACP,CAAC;AAAA,UACF;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrFA,GAAG,WAAW,eAAe;"}